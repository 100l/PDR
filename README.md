# Telegram-бот "Інтерактивні правила дорожного руху України"

Цей бот дозволяє шукати статті ПДР України за номером або ключовими словами, переглядати розділи, партнерів та статистику (для адміна).

## Вимоги
- Debian 12
- Docker
- Docker Compose
- Telegram Bot Token (отримати через @BotFather)
- Admin ID (ваш Telegram ID)

## Встановлення
1. Клонуйте репозиторій:
   ```bash
   git clone https://github.com/100l/PDR.git
   cd PDR
   ```

2. Створіть файл `.env`:
   ```
   TELEGRAM_BOT_TOKEN=8248715675:AAG0aX7z1vh6gaFnoFh6k0t3_t1ZnPV2VPc
   ADMIN_ID=6175701665
   ```

3. Запустіть парсер для заповнення бази даних:
   ```bash
   docker-compose run bot python src/parser.py
   ```

4. Запустіть бот:
   ```bash
   docker-compose up -d
   ```

## Використання
- `/start` — почати роботу з ботом
- `/search` — пошук статті
- `/sections` — перегляд розділів
- `/partners` — інформація про партнерів
- `/stats` — статистика та графіки (тільки для адміна)
- `/update_partners <текст>` — оновлення вмісту кнопки "Партнери" (тільки для адміна)

## Статистика
Команда `/stats` (доступна лише для адміна) показує:
- Унікальні користувачі (за день, тиждень, місяць, рік)
- Кількість запитів статей
- Кількість переглядів статей
- Середній інтервал між діями
- Середня кількість статей за сесію
- Популярні статті та розділи
- Глибина перегляду
- Технічні метрики (кількість callback, помилки)
- Метрики взаємодії (drop-off, середня тривалість сесії)
- Поведінкові сегменти (одноразові, регулярні, залучені користувачі)
- Графіки: унікальні користувачі за днями, популярні статті

## Структура
- `src/` — код бота та парсера
- `data/` — база даних SQLite (`PDR.db`) та графіки
- `.env` — токен і Admin ID
- `Dockerfile` — конфігурація Docker
- `docker-compose.yml` — налаштування контейнерів
- `requirements.txt` — залежності